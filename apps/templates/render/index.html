{% extends "layouts/base.html" %}
{% load static %}

{% block title %} Dashboard {% endblock %} 
<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
{% endblock stylesheets %}

{% block content %}
{% if request.user.is_editor or request.user.is_superuser%}
    <header class="header">
        <div class="container-fluid ">
            <div class="d-none d-md-flex  gap-3">
                <div class="col-auto">
                    <input class="btn-check col" id="success-outlined" type="radio" name="options-outlined" autocomplete="off" checked>
                    <label class="btn btn-outline-success col" for="success-outlined">Content</label>
                    
                    <input class="btn-check col" id="danger-outlined" type="radio" name="options-outlined" autocomplete="off">
                    <label class="btn btn-outline-danger col" for="danger-outlined">Reup-Video</label>
                </div>
                <div class="col-auto">
                    <select class="form-select" id="folder_name">
                        {% for item in folder %}
                            <option value="{{ item.id}}">{{ item.folder_name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-2">
                    <select class="form-select" id='channel_name'>
                        {% for iteam in profiles %}
                            <option value="{{iteam.id}}">{{ iteam.channel_name}}</option>
                        {% endfor %}
                    </select>
                </div>
                {% if request.user.is_superuser %}
                    <div class="col-auto">
                        <button class="btn btn-outline-primary" type="button" data-coreui-toggle="modal" data-coreui-target="#show_infor">
                            <svg class="icon">
                                <use xlink:href="/static/assets/vendors/@coreui/icons/svg/free.svg#cil-low-vision"></use>
                            </svg>
                        </button>
                    </div>
                {% endif %}
                <div class="col-auto">
                    <button class="btn btn-outline-primary" id="add-text-content" type="button" data-coreui-toggle="modal" data-coreui-target="#exampleModalLive3">Thêm Nội Dung</button>
                </div>

                <div class="col-auto">
                    <button class="btn btn-outline-primary" id='add-videos'type="button" data-coreui-toggle="modal" data-coreui-target="#modal-videos">Thêm Nhiều videos</button>
                </div>
                <div class="col-auto">
                    <button class="btn btn-outline-primary" id ='add-one-video'type="button" data-coreui-toggle="modal" data-coreui-target="#modal-infor-video">Thêm Videos</button>
                </div>
            </div>
        </div>
    </header>
{% endif %}

<div class="card">
    {% csrf_token %}
    <table class="table table-hover">
		<!-- Hiển thị thanh video -->
        <tbody id="myTbody">
        </tbody>
    </table>
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-end" id='page_bar'>
            {{ page_bar_html }}
        </ul>
    </nav>
</div>

<!-- Hiển thị  thông tin kênh -->
<div class="modal fade" id="show_infor" tabindex="-1" aria-labelledby="exampleModalPopoversLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalPopoversLabel">Thông Tin Profile</h5>
            <button class="btn-close" type="button" data-coreui-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id='show-infor-profile'>
            <div class="mb-3">
                <label class="form-label" for="exampleFormControlInput1">Email address</label>
                <input class="form-control" id="exampleFormControlInput1" value='{{ profile.channel_email_login }}' disabled>
            </div>
            <div class="mb-3">
                <label class="form-label" for="exampleFormControlInput1">Link Channel</label>
                <input class="form-control" id="exampleFormControlInput1"  value='{{ profile.channel_url }}'  disabled>
            </div>
            <div class="mb-3">
                <label class="form-label" for="exampleFormControlInput1">IP Vps Upload</label>
                <input class="form-control" id="exampleFormControlInput1" value='{{ profile.channel_vps_upload }}' disabled>
            </div>
            <div class="mb-3">
                <label class="form-label" for="exampleFormControlInput1">Số Tiền Hiện Trên Kênh</label>
                <input class="form-control" id="exampleFormControlInput1" value='{{ profile.channel_money }}'disabled>
            </div>
            <div class="mb-3">
                <label class="form-label" for="exampleFormControlInput1">Views 28h/Kênh</label>
                <input class="form-control" id="exampleFormControlInput1" value='{{ profile.channel_view_count }}'disabled>

            </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-coreui-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
</div>

<div class="modal fade" id="exampleModalLive3" tabindex="-1" aria-labelledby="exampleModalLiveLabe" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLiveLabel">Thêm Nội Dung Chủ Đề</h5>
          <button class="btn-close" id='close-modal-add-content' type="button" data-coreui-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <div class="row">
              <div class="col-4">
                <select class="form-select" aria-label="Default select example" id="add-video-text-content">
                    {% for iteam in folder %}
                        <option value="{{iteam.id}}">{{ iteam.folder_name }}</option>
                    {% endfor %}
                </select>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <div class="row">
              <div class="col">
                <input class="form-control" id='input-url-channel-folder' type="Url" placeholder="url video" aria-label="default input example">
              </div>
              <div class="col-auto">
                <button class="btn btn-outline-primary" type="button" id="seach-url-channel">
                  <svg class="icon">
                      <use xlink:href="/static/assets/vendors/@coreui/icons/svg/free.svg#cil-zoom"></use>
                  </svg>
              </button>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label" for="exampleFormControlTextarea1">Nội Dung Video</label>
            <textarea class="form-control" id="exampleFormControlTextarea1" style="height:400px" rows="3"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-coreui-dismiss="modal">Close</button>
          <button class="btn btn-primary" type="button" id="save-text-video-conent">Save changes</button>
        </div>
      </div>
    </div>
</div>

<div class="modal fade" id="modal-videos" tabindex="-1" aria-labelledby="exampleModalLiveLabe" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLiveLabel">ADD VIDEOS</h5>
          <button class="btn-close" id="close-modal-add-videos" type="button" data-coreui-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body g-3">
          <div class="mb-3">
            <div class="row">
              <div class="col-3">
                <label class="col-form-label">Số Video :</label>
              </div>
              <div class="col-3">
                <input class="form-control" type="number" id= "count-video" placeholder="nhập số lượng video" aria-label="First name" value='100'>
              </div>
              <div class="col">
                  <input class="form-control" type="date" placeholder="Last name" aria-label="Last name" id="date-Input" value="{{ current_time }}">
              </div>
            </div>
          </div>
          <div class="mb-3">
            <div class="row">
              <div class="col-3">
                <label class="col-form-label">Số Ký Tự :</label>
              </div>
              <div class="col-3">
                <input class="form-control" id="count-text-video" type="number" placeholder="Nhập Số Lượng Ký tự" aria-label="First name" value='4000'>
              </div>
              <div class="col">
                <input class="form-control"  id="input-time-upload" type="text" placeholder="Time Upload" aria-label="First name"  value="">
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-coreui-dismiss="modal">Close</button>
          <button class="btn btn-primary" id="create_videos_news" type="button" data-coreui-toggle="modal" data-coreui-target="#modal-status-add-videos">Save changes</button>
        </div>
      </div>
    </div>
</div>

<div class="modal fade" id="modal-status-add-videos" tabindex="-1" aria-labelledby="exampleModalLiveLabe" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLiveLabel"> Đang Tạo Videos </h5>
          <button class="btn-close" id="close-modal-add-videos" type="button" data-coreui-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body g-3">
            <div class="mb-3">
                <label for="formGroupExampleInput" id="cread-status-videos" class="form-label">Đang tạo ...1 /200</label>
                <div class="progress">
                    <div class="progress-bar bg-success progress-bar-striped progress-bar-animated " id="progress-bar-status"  role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-coreui-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
</div>

<div class="modal fade" id="modal-infor-video" tabindex="-1" aria-labelledby="exampleModalCenteredScrollableTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
        <div class="modal-content  h-100">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenteredScrollableTitle">Nhập Thông Tin</h5>
                <button class="btn-close" type="button" data-coreui-dismiss="modal" aria-label="Close"></button>
            </div>
        
            <div class="modal-body" id="edit-content-froms"><input type="hidden" id="id-video-edit" value="None">
                <div class="mb-3 row" id="input-infor-video">
                    <div class="col-auto ">
                        <div class="mb-3">
                            <img id="Image-Thumnail-infor-video" src=""
                                style="height: 300px; width:500px; border-radius: 5px; border: 2px solid rgb(255, 132, 0);">
                        </div>
                        <div class="col mb-3">
                            <label class="form-label" for="modal-infor-titel">Thumnail</label>
                            <input type="file" name="thumbnail" class="form-control" accept="image/*" id="input-Thumnail">
                        </div>
                    </div>
                    <div class="col">
                        <div class="mb-3">
                            <label class="form-label" for="modal-infor-titel">Tiêu Đề</label>
                            <input type="text" name="title" value="" class="form-control" placeholder="Nhập tiêu đề"
                                id="input-title" required="">
                        </div>
                        <div class="mb-3">
                            <label class="form-label" for="input-infor-video-description">Mô tả:</label>
                            <textarea name="description" cols="40" rows="5" class="form-control" id="input-description"
                                required=""></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label" for="input-infor-video-keyword">Từ khóa:</label>
                            <input type="text" name="keyword" class="form-control" id="input-keyword" required="">
                        </div>
                        <div class="row">
                            <div class="mb-3 col">
                                <label class="form-label" for="input-infor-date-upload">Date Upload</label>
                                <input type="date" name="date_upload" value="2024-05-20" class="form-control" id="input-date-upload"
                                    required="">
                            </div>
                            <div class="mb-3 col">
                                <label class="form-label" for="input-infor-time-upload">Time Upload</label>
                                <input type="time" name="time_upload" value="09:00" class="form-control" id="input-time-upload"
                                    placeholder="HH/MM" required="">
                            </div>
                        </div>
                    </div>
                </div>
                <div id="input-image-and-text" style="display:none">
                    <div class="row mb-3">
                        <label class="col-2 col-form-label" for="inputEmail3">Regex chia dòng:</label>
                        <div class="col-6">
                            <input class="form-control" id="splitText" value="(^.{50,100000}[，，、,.「」。。？；：！](?!$))(.{50,105000}$)"
                                type="text">
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-primary" id="btn-splitText">Chia dòng</button>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <label class="col-2 col-form-label" for="inputEmail3">Chia câu theo dấu :</label>
                        <div class="col-auto">
                            <input class="form-control" value="。." id="splitText2" type="text">
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-primary" id="btn-splitText-2">Chia dòng</button>
                        </div>
                        <label class="col-auto col-form-label" for="inputEmail3">Xóa ký tự đặc biệt:</label>
                        <div class="col-auto">
                            <input class="form-control" value="「」" id="splitText3" type="text">
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-danger" id="delete-characters">Xóa Ký Tự</button>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <label class="col-2 col-form-label" for="inputEmail3">Audio</label>
                        <div class="col-6">
                            <input type="file" class="form-control"  id="inputAudio" accept="audio/*">
                            <input class="form-control" id="url-audio" value="" type="text" readonly>
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-primary" id="btnChangeFileAudio">Đổi File</button>
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-danger" id="btnDeleteFileAudio">Xóa</button>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <label class="col-2 col-form-label" for="inputEmail3">SubTitel Srt</label>
                        <div class="col-6">
                            <input type="file" class="form-control" id="inputSrt" accept=".srt">
                            <input class="form-control" id="url-srt" value="" type="text" readonly>
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-primary" id="btnChangeFileSrt">Đổi File</button>
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-danger"  id="btnDeleteFileSrt" >Xóa</button>
                        </div>
                    </div>
                   
                    <div class="row mb-3">
                        <textarea name="content" cols="40" rows="10" id="input-text-content" class="form-control"></textarea>
                        <h6 class="card-title" id="count-text-content">Số Ký Tự 6252 --- Số Dòng 185</h6>
                    </div>
                </div>

                <div id="edit_text_video" style="display:none">
                    <div class="row m-2 align-items-center">
                        <div class="col-auto">
                            <button class="btn btn-primary " id="open-input-image">Thêm Image</button>
                        </div>
                        <div class="col-auto">
                            <label>Tỷ Lệ Hình Ảnh</label>
                        </div>
                        <div class="col-auto">
                            <input id="count-image-video" type="number" style="width:70px;" class="form-control" value="60" min="0"
                                max="100" step="5">
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-primary" id="random-image">Random Image &amp; Video</button>
                        </div>
                    </div>
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th scope="col" class="col-1 text-center">STT</th>
                                <th scope="col" class="col-8">Text</th>
                                <th scope="col" class="col-2 text-center">Hình Ảnh/Video</th>
                            </tr>
                        </thead>
                        <tbody id="edit-iteam-video" class="align-items-center">
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <div class="col">
                    <button class="btn btn-danger" id='button-back' style="width:150px;" type="button">Back</button>
                    <button class="btn btn-danger" id='button-back-2' style="width:150px;" type="button">Back</button>
                </div>
                <div class="col-footer">
                    <button class="btn btn-primary"  id="next-cread-image" style="width:150px;" type="button">Tiếp Tục</button>
                    <button class="btn btn-primary" id="edit_video" style="width:150px;" type="button">Tiếp Tục</button>
                    <button class="btn btn-primary" id="save-text-video" style="width:150px;" type="button">Lưu Video</button>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="modal-overlay" class='modal' style="background-color: rgba(0, 0, 0, 0.5);">
    <div id="modal-image-content" class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
        <div class="modal-content h-75">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenteredScrollableTitle">image Video</h5>
                <button class="btn-close close-modal-input-image"  type="button" aria-label="Close"></button>
            </div>
            <div class="modal-body" id='modal-input-image'>
                <div class="row row-cols-1 row-cols-md-6 g-3 justify-content-center" id="image-video">
                    <div class="col" id="input-click-image">
                        <div class="card border-success p-4 enlarge-on-hover" style="height: 150px; width: 150px;" >
                            <label for="input-image">
                                <img class="card-img-top" src="/static/assets/img/plus.png" alt="">
                            </label>
                            <input type="file" id="input-image" style="display:none;" class="form-control" accept="image/*" multiple>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-center">
                <input type="hidden" id="iteam-edit" value="none">
                <button class="btn btn-primary col-1" id='check-delete-image' type="button">Bỏ Chọn</button>
                <button class="btn btn-info col-1" id='choice_image' type="button">Chọn</button>
                <button class="btn btn-danger col-1" id='delete-image' type="button">Xóa</button>
                <button class="btn btn-secondary col-1 close-modal-input-image" type="button">close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal-watch-video" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
        <div class="modal-content h75">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalPopoversLabel">Thông Tin Video</h5>
                <button class="btn-close btn-close-play-video" type="button" data-coreui-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-0 m-0" style="flex-grow: 1; display: flex;">
                <iframe id="videoIframe" style="flex-grow: 1; width: 100%; height:500px;" src="https://s3-hcm5-r1.longvan.net/19425936-media/data/234/PQKOBYZ98Q.mp4?AWSAccessKeyId=AUQESQVFF01YMVGUPVF9&Signature=NuSByhMjHImuxeLn6ejSgC8xFHY%3D&Expires=4400206157" frameborder="0" allowfullscreen></iframe>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary btn-close-play-video" type="button" data-coreui-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock content %}
<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    <script src="{% static 'assets/js/render.js'%}"></script>
{% endblock javascripts %}
